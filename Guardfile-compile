guard :shell do
  watch('Gemfile') do |m|
    title = 'Bundler'
    msg = `bundle`
    status = ($?.success? && :success) || :failed

    n msg, title, status
    "-> #{msg}"
  end

  watch(/(pom\.xml)|(src\/(main|test)\/.+\.(thrift|java))/) do |m|
    title = 'Test'
    msg = `mvn generate-sources -q && mvn compile -q`
    status = ($?.success? && :success) || :failed

    n msg, title, status
    "-> #{msg}"
  end
end
